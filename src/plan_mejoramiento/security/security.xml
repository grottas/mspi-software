<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>
<!--
=========================================================================
 Groups Definition
=========================================================================
-->
    <record model="ir.module.category" id="category_plan_mejoramiento">
        <field name="name">Planes de Mejoramiento</field>
        <field name="sequence">0</field>
        <field name="visible" eval="1" />
    </record>
    <record id="analista" model="res.groups">
        <field name="name">Analista</field>
        <field name="category_id" ref="plan_mejoramiento.category_plan_mejoramiento"/>
        <field name="implied_ids"
            eval="[
                (4, ref('base.group_user')),
                (4, ref('project.group_project_user')),
            ]"
        />
    </record>
    <record id="ejecutor" model="res.groups">
        <field name="name">Ejecutor</field>
        <field name="category_id" ref="plan_mejoramiento.category_plan_mejoramiento"/>
        <field name="implied_ids"
            eval="[
                (4, ref('base.group_user')),
                (4, ref('project.group_project_user')),
                (4, ref('plan_mejoramiento.analista')),
            ]"
        />
    </record>

    <record id="base_idu.group_jefe_dependencia" model="res.groups">
        <field name="implied_ids"
            eval="[
                (4, ref('project.group_project_user')),
                (4, ref('plan_mejoramiento.ejecutor')),
            ]"
        />
    </record>

    <record id="auditor" model="res.groups">
        <field name="name">Auditor</field>
        <field name="category_id" ref="plan_mejoramiento.category_plan_mejoramiento"/>
        <field name="implied_ids"
            eval="[
                (6, 0, [ref('project.group_project_manager'), ref('plan_mejoramiento.analista')])
            ]"
        />
    </record>
    <record id="administrador" model="res.groups">
        <field name="name">Administrador</field>
        <field name="category_id" ref="plan_mejoramiento.category_plan_mejoramiento"/>
        <field name="implied_ids"
            eval="[
                (6, 0, [ref('project.group_project_manager'), ref('plan_mejoramiento.analista')])
            ]"
        />
        <field name="users" eval="[(4, ref('base.user_root'))]"/>
    </record>
<!--
=============================================================================
 Domain Constraints
=============================================================================
-->

<!-- Domain plan_mejoramiento.administrador -->
    <record id="admin_todo_en_planes" model="ir.rule">
        <field name="name">El administrador tiene derecho de CRUD en todos los planes</field>
        <field name="model_id" ref="plan_mejoramiento.model_plan_mejoramiento_plan"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('plan_mejoramiento.administrador'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="admin_todo_en_hallazgos" model="ir.rule">
        <field name="name">El administrador tiene derecho de CRUD en todos los hallazgos</field>
        <field name="model_id" ref="plan_mejoramiento.model_plan_mejoramiento_hallazgo"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('plan_mejoramiento.administrador'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="admin_todo_en_acciones" model="ir.rule">
        <field name="name">El administrador tiene derecho de CRUD en todas las acciones</field>
        <field name="model_id" ref="plan_mejoramiento.model_plan_mejoramiento_accion"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('plan_mejoramiento.administrador'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="admin_todo_en_proyectos" model="ir.rule">
        <field name="name">El administrador tiene derecho de CRUD en todos los proyectos de plan de mejoramiento unicamente</field>
        <field name="model_id" ref="project.model_project_project"/>
        <field name="domain_force">[('proyecto_tipo','=','plan_mejoramiento')]</field>
        <field name="groups" eval="[(4, ref('plan_mejoramiento.administrador'))]"/>
        <field name="perm_read" eval="False"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="admin_solo_edita_fechas_en_wizard" model="ir.rule">
        <field name="name">El administrador solo podra editar fecha inicio y fecha fin</field>
        <field name="model_id" ref="base.model_ir_config_parameter"/>
        <field name="domain_force">[('key','like','plan_mejoramiento.activar_avances.%')]</field>
        <field name="groups" eval="[(4, ref('plan_mejoramiento.administrador'))]"/>
        <field name="perm_read" eval="False"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- Domain plan_mejoramiento.analista -->
    <!-- Domain plan_mejoramiento.ejecutor -->
    <!-- Domain base_idu.group_jefe_dependencia -->
    <!-- Domain plan_mejoramiento.auditor -->

</data>
</openerp>